<html>
<head>
<script src="https://fb.me/react-0.12.0.js"></script>
<script src="https://fb.me/JSXTransformer-0.12.0.js"></script>
<script type="text/jsx">
/** @jsx React.DOM */
var usernames = {{ users}};
var stories = {{ storiesByUser }};


var SingleStory = React.createClass({
  render: function() {
    return (
      <div class="singleStoryDiv">
        <a href="{this.props.story.url}">{this.props.story.title}</a> ({this.props.story.score})
      </div>
    );
  }
});


var StoriesForUser = React.createClass({
  render: function() {
    var storyElems = [];
    for (var i = 0; i < this.props.stories.length; i++) {
      storyElems.push(<div><SingleStory story={this.props.stories[i]} /></div>);
    }
    return (<div><h3>{this.props.user}</h3>{storyElems}</div>);
  }
});
var Stories = React.createClass({
  render: function() {
    alert("num users: " + this.props.users.length);
    var userList = [];
    for (var i = 0; i < this.props.users.length; i++) {
      userList.push(<StoriesForUser key={i} stories={stories} user={this.props.users[i]}/>);
    }
    return (<div><p>"user"</p>{userList}<br/>"End"</div>);
  }
});

React.renderComponent(
  <Stories users={usernames} stories={stories}/>,
  document.getElementById("storiesDiv"));
</script>
</head>
<body>
<h2>News by users following</h2>
<div id="storiesDiv"></div>
</body>
</html>
